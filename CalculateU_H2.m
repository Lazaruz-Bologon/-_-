U_1 = [0.3, -17.9, -37, -55.7, -74.4, -92.8, -111.6,-129.8 -148.5 -166.8 -184.8];
U_2 = [-1.7 16.9 35.8 54.5 73.2 91.8 110.7 128.9 147.6 166.1 184.1];
U_3 = [-1.4 -20.6 -39.3 -58.1 -76.6 -95.5 -114.1 -132.7 -150.9 -169.6 -187.4];
U_4 = [0 19.2 38 56.5 75.2 94 112.6 131.2 149.3 168.1 185.9];
I_M = [0 100 200 300 400 500 600 700 800 900 1000];
U_H = 0.25 * (U_1 - U_2 + U_3 - U_4);
K=-23.3946;
B=U_H./(K*4);
coefficients = polyfit(I_M, B, 1);
slope = coefficients(1);
intercept = coefficients(2); 
correlation_coefficient = corrcoef(I_M, B);
figure;
plot(I_M, B, 'o-', 'LineWidth', 2);
title('B 关于 I_M 变化的图像');
xlabel('电流 I_M (单位: mA)');
ylabel('磁感应强度 B (单位: mT)');
grid on;
hl = line([min(I_M) max(I_M)], [0 0], 'Color', 'black', 'LineWidth', 0.5);
vl = line([2 2], [min(B) max(B)], 'Color', 'black', 'LineWidth', 0.5);
legend('B vs I_M', 'Location', 'northwest');
text(max(I_M)-500, max(B)-0.15, ['斜率: ' num2str(slope)], 'HorizontalAlignment', 'left');
text(max(I_M)-500, max(B) -0.25, ['截距: ' num2str(intercept)], 'HorizontalAlignment', 'left');
text(max(I_M)-500, max(B) - 0.35, ['相关系数: ' num2str(correlation_coefficient(1, 2))], 'HorizontalAlignment', 'left');